<div class="form-group">
    <label>{{localize "XPRPG.HitPointsHeader"}}</label>
    <input type="number" name="system.hp" min="6" max="12" data-dtype="Number" value="{{data.hp}}">
</div>

<div class="form-group form-group-trait">
    <label class="pf-title">
        {{localize "XPRPG.KeyAbilityLabel"}}
        <a class="tag-selector" data-tag-selector="basic" data-title="XPRPG.KeyAbilityLabel" data-config-types="abilities" data-property="system.keyAbility" data-no-custom="true"><i class="fas fa-edit"></i></a>
    </label>

    <ul class="abc-traits-list">
        {{#each selectedKeyAbility}}
            <span class="tag-legacy {{@key}}">{{localize this}}</span>
        {{/each}}
    </ul>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.Actor.Character.ClassDC.Label"}}</label>
    <select name="system.classDC" data-dtype="Number">
        {{#select data.classDC}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.PerceptionLabel"}}</label>
    <select name="system.perception" data-dtype="Number">
        {{#select data.perception}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.SavesFortitude"}}</label>
    <select name="system.savingThrows.fortitude" data-dtype="Number">
        {{#select data.savingThrows.fortitude}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.SavesReflex"}}</label>
    <select name="system.savingThrows.reflex" data-dtype="Number">
        {{#select data.savingThrows.reflex}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.SavesWill"}}</label>
    <select name="system.savingThrows.will" data-dtype="Number">
        {{#select data.savingThrows.will}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.WeaponTypeSimple"}}</label>
    <select name="system.attacks.simple" data-dtype="Number">
        {{#select data.attacks.simple}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.WeaponTypeMartial"}}</label>
    <select name="system.attacks.martial" data-dtype="Number">
        {{#select data.attacks.martial}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.WeaponTypeAdvanced"}}</label>
    <select name="system.attacks.advanced" data-dtype="Number">
        {{#select data.attacks.advanced}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.WeaponTypeUnarmed"}}</label>
    <select name="system.attacks.unarmed" data-dtype="Number">
        {{#select data.attacks.unarmed}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group other-weapons">
    <label>{{localize "XPRPG.WeaponTypeSpecial"}}</label>
    <input type="text" name="system.attacks.other.name" data-dtype="String" value="{{data.attacks.other.name}}">
    <select name="system.attacks.other.rank" data-dtype="Number">
        {{#select data.attacks.other.rank}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.ArmorTypeUnarmored"}}</label>
    <select name="system.defenses.unarmored" data-dtype="Number">
        {{#select data.defenses.unarmored}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.ArmorTypeLight"}}</label>
    <select name="system.defenses.light" data-dtype="Number">
        {{#select data.defenses.light}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group">
    <label>{{localize "XPRPG.ArmorTypeMedium"}}</label>
    <select name="system.defenses.medium" data-dtype="Number">
        {{#select data.defenses.medium}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>


<div class="form-group">
    <label>{{localize "XPRPG.ArmorTypeHeavy"}}</label>
    <select name="system.defenses.heavy" data-dtype="Number">
        {{#select data.defenses.heavy}}
            {{#each proficiencyChoices as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
            {{/each}}
        {{/select}}
    </select>
</div>

<div class="form-group form-group-trait">
    <label class="pf-title">
        {{localize "XPRPG.TrainedSkillsLabel"}}
        <a class="tag-selector" data-tag-selector="basic" data-title="XPRPG.TrainedSkillsLabel" data-config-types="skills" data-property="system.trainedSkills"><i class="fas fa-edit"></i></a>
    </label>

    <ul class="abc-traits-list">
        {{#each trainedSkills}}
            {{#if this.selected}}
                <span class="tag-legacy {{@key}}">{{this.label}}</span>
            {{/if}}
        {{/each}}
    </ul>
</div>

<div class="form-group additional-language">
    <label>{{localize "XPRPG.AdditionalSkills"}}</label>
    <input type="number" name="system.trainedSkills.additional" data-dtype="Number" value="{{data.trainedSkills.additional}}">
    <span>{{localize "XPRPG.AdditionalLanguagePlusInt"}}</span>
</div>


<div class="form-group form-group-trait">
    <label class="pf-title">
        {{localize "XPRPG.AncestryFeatLevels"}}
        <a class="tag-selector" data-tag-selector="basic" data-title="XPRPG.AncestryFeatLevels" data-config-types="levels" data-property="system.ancestryFeatLevels" data-no-custom="true"><i class="fas fa-edit"></i></a>
    </label>

    <ul class="abc-traits-list">
        {{#each ancestryFeatLevels}}
            {{#if this.selected}}
                <span class="tag-legacy {{@key}}">{{this.label}}</span>
            {{/if}}
        {{/each}}
    </ul>
</div>

<div class="form-group form-group-trait">
    <label class="pf-title">
        {{localize "XPRPG.ClassFeatLevels"}}
        <a class="tag-selector" data-tag-selector="basic" data-title="XPRPG.ClassFeatLevels" data-config-types="levels" data-property="system.classFeatLevels" data-no-custom="true"><i class="fas fa-edit"></i></a>
    </label>

    <ul class="abc-traits-list">
        {{#each classFeatLevels}}
            <span class="tag-legacy {{@key}}">{{this.label}}</span>
        {{/each}}
    </ul>
</div>

<div class="form-group form-group-trait">
    <label class="pf-title">
        {{localize "XPRPG.GeneralFeatLevels"}}
        <a class="tag-selector" data-tag-selector="basic" data-title="XPRPG.GeneralFeatLevels" data-config-types="levels" data-property="system.generalFeatLevels" data-no-custom="true"><i class="fas fa-edit"></i></a>
    </label>

    <ul class="abc-traits-list">
        {{#each generalFeatLevels}}
            <span class="tag-legacy {{@key}}">{{this.label}}</span>
        {{/each}}
    </ul>
</div>

<div class="form-group form-group-trait">
    <label class="pf-title">
        {{localize "XPRPG.SkillFeatLevels"}}
        <a class="tag-selector" data-tag-selector="basic" data-title="XPRPG.SkillFeatLevels" data-config-types="levels" data-property="system.skillFeatLevels" data-no-custom="true"><i class="fas fa-edit"></i></a>
    </label>

    <ul class="abc-traits-list">
        {{#each skillFeatLevels}}
            <span class="tag-legacy {{@key}}">{{this.label}}</span>
        {{/each}}
    </ul>
</div>

<div class="form-group form-group-trait">
    <label class="pf-title">
        {{localize "XPRPG.SkillIncreaseLevels"}}
        <a class="tag-selector" data-tag-selector="basic" data-title="XPRPG.SkillIncreaseLevels" data-config-types="levels" data-property="system.skillIncreaseLevels" data-no-custom="true"><i class="fas fa-edit"></i></a>
    </label>

    <ul class="abc-traits-list">
        {{#each skillIncreaseLevels}}
            <span class="tag-legacy {{@key}}">{{this.label}}</span>
        {{/each}}
    </ul>
</div>

<div class="form-group-stacked item-ref-group" data-valid-drops="classfeature">
    <label for="data.traits">{{localize "XPRPG.ClassFeatures"}}</label>
    {{#> abcItems}}{{/abcItems}}
    {{#unless data.items}}{{localize XPRPG.DragDropFeats}}{{/unless}}
</div>

{{~#*inline "abcItem"~}}
    <li data-pack-id="{{item.pack}}" data-index="{{i}}" data-item-uuid="{{item.uuid}}">
        <img src="{{item.img}}">
        <div class="name">
            {{item.name}}{{#if item.fromWorld}}<i class="fa fa-globe" title="{{localize "XPRPG.Item.WorldItemWarning"}}"></i>{{/if}}
        </div>
        <input type="number" class="level" value="{{item.level}}" name="system.items.{{i}}.level" />
        <input value="{{item.uuid}}" name="system.items.{{i}}.uuid" type="hidden" data-dtype="String" />
        <input value="{{item.name}}" name="system.items.{{i}}.name" type="hidden" data-dtype="String" />
        <a class="remove" data-action="remove"><i class="fa fa-times"></i></a>
        {{#if item.items~}}
            {{#> abcItems item}}{{@partial-block}}items.{{i}}.{{/abcItems}}
        {{~/if}}
    </li>
{{~/inline~}}

{{~#*inline "abcItems"~}}
<ul class="item-refs">
    {{#each features}}
        {{#> abcItem item=this.item i=this.key}}{{@partial-block}}{{/abcItem}}
    {{/each}}
</ul>
{{~/inline~}}
